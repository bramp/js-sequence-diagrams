<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
            <style type="text/css">
        @font-face {
          font-family: 'Daniel';
          font-style: normal;
          font-weight: normal;
          src: local('Daniel'), url('../fonts/daniel/daniel.otf') format('opentype');
        }

        /* Override Snap defaults examples */
        /*override the default font for the "hand" theme*/
        /*.sequence.hand {
            font-size: 16px;
            font-family: 'Consolas';
        }*/

        /* override background color of note */
        /*.sequence .note rect,
        .sequence .note path {
            fill: #ffff00;
        }*/

        /* hover signal text color */
        .sequence .signal line:hover,
        .sequence .signal path:hover {
            stroke: #777777;
            fill: #777777;
        }
    </style>
    </head>
    <body>
    <textarea id="language" rows="10" cols="50">
#Note left of A: Note to the\n left of A
#Note right of A: Note to the\n right of A
#Note over A: Note over A
Note over A,B: Note over A,B
A -> B: hello
A -->> B: bye
    </textarea>
    <div style="display: inline-block">
        <label style="display: block"><input type="checkbox" name="themeChoice" value="hand" checked="checked">SVG hand</label>
        <label style="display: block"><input type="checkbox" name="themeChoice" value="simple" checked="checked">SVG simple</label>
        <label style="display: block"><input type="checkbox" name="themeChoice" value="oldHand">Raphaël hand</label>
        <label style="display: block"><input type="checkbox" name="themeChoice" value="oldSimple">Raphaël simple</label>
    </div> 

            <div id="diagram"></div>

            <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>-->
            <script src="../bower_components/jquery/jquery.min.js"></script>

            <script src="../bower_components/underscore/underscore-min.js"></script>
            <script src="../bower_components/lodash/lodash.min.js"></script>
            <script src="../bower_components/snap.svg/dist/snap.svg.js"></script>
            <script src="../bower_components/raphael/raphael-min.js"></script>


            <!--
        <script src="../build/diagram-grammar.js"></script>
        <script src="../src/theme.js"></script>
        <script src="../src/theme-snap.js"></script>
        <script src="../src/theme-raphael.js"></script>
        <script src="../fonts/daniel/daniel_700.font.js"></script>

        <script src="../src/sequence-diagram.js"></script>
        <script src="../src/jquery-plugin.js"></script>
        -->
            <!--script src="../build/sequence-diagram.js"></script-->

            <script src="../build/sequence-diagram-min.js"></script>
            <script>
                $(window).load(function () {
                    function draw() {
                        $("#diagram").empty();

                        var diagram = Diagram.parse($('#language').val());
                        console.log(diagram);
                        $($('input[name=themeChoice]:checked').get().reverse()).each(function () {
                            diagram.drawSVG('diagram', { theme: $(this).val() });
                        });
                    }

                    draw();
                    
                    $('input[name=themeChoice]').on("change", function() { draw() });
                    $('#language').on("change input paste", _.throttle(function () {
                        //try {
                        draw();
                        //} catch (e) {
                        //    console.log(e);
                        //}
                    }, 100));
                });
            </script>
</body>
</html>